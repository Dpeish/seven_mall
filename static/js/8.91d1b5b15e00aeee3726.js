webpackJsonp([8],{Geuo:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});e("kBI2");var c=e("f974"),s=e.n(c),n=(s.a,s.a,s.a,s.a,s.a,s.a,{name:"cart",data:function(){return{notImg:s.a,xscroll:"",cartData:[],allChecked:!1,piece:0,kind:0,totalPrice:0,isEdit:!1,rawNum:""}},watch:{cartData:{handler:function(t){if(!t.length)return!1;for(var a=0;a<t.length;a++){if(!t[a].checked){this.allChecked=!1;break}this.allChecked=!0}},deep:!0}},computed:{isAllCheck:function(){return this.cartData.every(function(t){return t.checked})},isAccount:function(){return this.cartData.length}},methods:{add:function(t,a){if(a.amount>=a.max)return!1;a.amount++,a.checked&&this.handleTotal()},sub:function(t,a){if(a.amount<2)return!1;a.amount--,a.checked&&this.handleTotal()},enterNum:function(t,a){this.rawNum=t.target.value,a.checked&&this.handleTotal()},blurNum:function(t,a){var e=this;this.$nextTick(function(){t.target.value>a.max?a.amount=e.rawNum:""===t.target.value&&(a.amount=1)}),a.checked&&this.handleTotal()},AllCheck:function(){var t=this;t.$nextTick(function(){t.allChecked=!t.allChecked,t.allChecked?t.cartData.forEach(function(t){t.checked=!0,t.goodsList.forEach(function(t){t.checked=!0})}):t.cartData.forEach(function(t){t.checked=!1,t.goodsList.forEach(function(t){t.checked=!1})}),t.handleTotal()})},handleCheck:function(t){var a=this;a.$nextTick(function(){t.checked=!t.checked,t.checked?t.goodsList.forEach(function(t){t.checked=!0}):t.goodsList.forEach(function(t){t.checked=!1}),a.handleTotal()})},childCheck:function(t,a){var e=this;e.$nextTick(function(){a.checked=!a.checked;var c=[];t.goodsList.forEach(function(t){t.checked&&c.push(t)}),c.length>=t.goodsList.length?t.checked=!0:t.checked=!1,e.handleTotal()})},handleTotal:function(){var t=this;t.totalPrice=0,t.piece=0,t.kind=0;var a=[];t.cartData.forEach(function(e){e.goodsList.forEach(function(e,c){e.checked&&(t.totalPrice+=e.goodsPrice*e.amount,a.push(e),t.kind=a.length,t.piece+=e.amount-0)})})},hanldeCommit:function(){console.log(this.cartData)},hanldeDelete:function(){var t=this;t.cartData.forEach(function(a,e){a.goodsList.forEach(function(a,e){a.checked&&t.$store.dispatch("delGoodsAsync",a.storeId)})}),t.handleTotal(),t.getCartData()},hanldeEdit:function(){this.isEdit=!this.isEdit},getCartData:function(){var t=[];for(var a in this.$store.state.cart){var e=this.$store.state.cart[a];e.goodsList.length>0&&t.push(e)}this.cartData=t}},mounted:function(){var t=this;this.$nextTick(function(){t.getCartData(),t.cartData.forEach(function(a){a.checked&&t.handleTotal(),a.goodsList.forEach(function(a){a.checked&&t.handleTotal()})})})}}),i={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"header"},[t._v("\n    购物车\n    "),t.isAccount?e("span",{staticClass:"manage",on:{click:t.hanldeEdit}},[t._v("\n      "+t._s(t.isEdit?"完成":"管理")+"\n    ")]):t._e()]),t._v(" "),e("div",{ref:"wrapper",staticClass:"cart-container"},[t.isAccount?t._e():e("div",{staticClass:"noData"},[t._m(0),t._v(" "),e("p",[t._v("购物车竟然是空的")]),t._v(" "),e("p",[t._v("快去逛逛吧!")])]),t._v(" "),t._l(t.cartData,function(a,c){return e("ul",{key:c,staticClass:"cart-item"},[e("li",{staticClass:"item-cell group"},[e("label",{staticClass:"Nii-checkbox",on:{click:function(e){return t.handleCheck(a)}}},[e("input",{attrs:{type:"checkbox"},domProps:{checked:a.checked}})]),t._v(" "),e("div",{staticClass:"item-cell-right"},[e("img",{staticClass:"head-img",attrs:{src:a.storeImg,alt:""}}),t._v(" "),e("p",{staticClass:"store-name"},[t._v(t._s(a.storeName)+" "),e("i",{staticClass:"iconfont icon-right-arrow"})]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"order-status"},[t._v("去凑单")])])]),t._v(" "),a.saleList.length?e("li",{staticClass:"item-cell sale"},[e("span",[t._v("满减")]),t._v(" "),t._m(1,!0)]):t._e(),t._v(" "),t._l(a.goodsList,function(c,s){return e("li",{key:s,staticClass:"item-cell"},[e("label",{staticClass:"Nii-checkbox",on:{click:function(e){return t.childCheck(a,c)}}},[e("input",{attrs:{type:"checkbox"},domProps:{checked:c.checked}})]),t._v(" "),e("div",{staticClass:"notice"},[e("img",{staticClass:"goods-img",attrs:{src:c.goodsImg,alt:""}}),t._v(" "),e("div",{staticClass:"goods-content"},[e("p",{staticClass:"goods-info"},[t._v(t._s(c.goodsInfo))]),t._v(" "),e("p",{staticClass:"goods-weight"},[t._v("规格："+t._s(c.goodsWeight))]),t._v(" "),e("p",{staticClass:"goods-price"},[t._v(t._s(t._f("formatPrice")(c.goodsPrice))),e("span",{staticClass:"goods-unit"},[t._v(" /"+t._s(c.unit))])])])]),t._v(" "),e("div",{staticClass:"numbox"},[e("div",{staticClass:"numbox-area"},[e("div",{staticClass:"minus-minus"},[e("button",{attrs:{disabled:c.amount<2}},[e("i",{staticClass:"iconfont icon-sub",on:{click:function(a){return t.sub(a,c)}}})])]),t._v(" "),e("div",{staticClass:"minus-input"},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:c.amount,expression:"goods.amount",modifiers:{number:!0}}],attrs:{type:"number",oninput:"this.value=this.value.replace(/\\D/g,'').replace(/^0+(?=\\d)/,'')"},domProps:{value:c.amount},on:{focus:function(a){return t.enterNum(a,c)},blur:[function(a){return t.blurNum(a,c)},function(a){return t.$forceUpdate()}],input:function(a){a.target.composing||t.$set(c,"amount",t._n(a.target.value))}}})]),t._v(" "),e("div",{staticClass:"minus-plus"},[e("button",{attrs:{disabled:c.amount>=c.max}},[e("i",{staticClass:"iconfont icon-jia",on:{click:function(a){return t.add(a,c)}}})])])])])])})],2)})],2),t._v(" "),t.isAccount?e("div",{ref:"account",staticClass:"all-account"},[e("label",{staticClass:"Nii-checkbox all-checkbox",on:{click:t.AllCheck}},[e("input",{attrs:{type:"checkbox"},domProps:{checked:t.allChecked}})]),t._v(" "),e("div",{staticClass:"total"},[t._v("\n      "+t._s(t.piece)+"件/"+t._s(t.kind)+"种 "),e("span",{staticClass:"money"},[t._v(t._s(t._f("formatPrice")(t.totalPrice||"0"))+"元")])]),t._v(" "),t.isEdit?e("div",{staticClass:"edit",on:{click:t.hanldeDelete}},[t._v("\n      删除\n    ")]):e("div",{staticClass:"account",on:{click:t.hanldeCommit}},[t._v("\n      结算\n    ")])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("p",{staticClass:"not-img"},[a("span",{staticClass:"iconfont icon-notstore"})])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",{staticClass:"store-name"},[this._v("下单满100元立减30元 "),a("i",{staticClass:"iconfont icon-right-arrow"})])}]};var o=e("C7Lr")(n,i,!1,function(t){e("Ust6")},"data-v-c2604eaa",null);a.default=o.exports},Ust6:function(t,a){}});
//# sourceMappingURL=8.91d1b5b15e00aeee3726.js.map