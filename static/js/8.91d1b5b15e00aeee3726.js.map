{"version":3,"sources":["webpack:///src/views/cart/children/cart.vue","webpack:///./src/views/cart/children/cart.vue?3112","webpack:///./src/views/cart/children/cart.vue"],"names":["cart","notimg_default","a","name","data","notImg","xscroll","cartData","allChecked","piece","kind","totalPrice","isEdit","rawNum","watch","handler","val","length","i","checked","this","deep","computed","isAllCheck","every","isAccount","methods","add","e","res","amount","max","handleTotal","sub","enterNum","target","value","blurNum","_this","$nextTick","AllCheck","_self","forEach","item","goodsList","items","handleCheck","childCheck","parent","child","_check","push","_kind","index","goodsPrice","hanldeCommit","console","log","hanldeDelete","indexs","$store","dispatch","storeId","getCartData","hanldeEdit","arr","o","state","x","mounted","_this2","children_cart","render","_vm","_h","$createElement","_c","staticClass","_v","on","click","_s","_e","ref","_m","_l","key","$event","attrs","type","domProps","src","storeImg","alt","storeName","directives","rawName","expression","saleList","goods","ind","goodsImg","goodsInfo","goodsWeight","_f","unit","disabled","modifiers","number","oninput","focus","blur","$forceUpdate","input","composing","$set","_n","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"wIA6IAA,GAzDAC,EAAAC,EAWAD,EAAAC,EASAD,EAAAC,EAWAD,EAAAC,EAMAD,EAAAC,EASAD,EAAAC,GAYAC,KAAA,OACAC,KAFA,WAGA,OACAC,OAAAJ,EAAAC,EACAI,QAAA,GACAC,YACAC,YAAA,EACAC,MAAA,EACAC,KAAA,EACAC,WAAA,EACAC,QAAA,EACAC,OAAA,KAGAC,OACAP,UACAQ,QADA,SACAC,GAGA,IAAAA,EAAAC,OAEA,SAKA,IADA,IACAC,EAAA,EAAAA,EAAAF,EAAAC,OAAAC,IAAA,CACA,IAAAF,EAAAE,GAAAC,QAAA,CAFAC,KAGAZ,YAAA,EAEA,MALAY,KAQAZ,YAAA,IAKAa,MAAA,IAGAC,UACAC,WADA,WAEA,OAAAH,KAAAb,SAAAiB,MAAA,SAAAR,GAGA,OAAAA,EAAAG,WAGAM,UARA,WASA,OAAAL,KAAAb,SAAAU,SAGAS,SACAC,IADA,SACAC,EAAAC,GAEA,GAAAA,EAAAC,QAAAD,EAAAE,IACA,SAEAF,EAAAC,SAEAD,EAAAV,SAEAC,KAAAY,eAGAC,IAbA,SAaAL,EAAAC,GAEA,GAAAA,EAAAC,OAAA,EACA,SAEAD,EAAAC,SAEAD,EAAAV,SAEAC,KAAAY,eAGAE,SAzBA,SAyBAN,EAAAC,GACAT,KAAAP,OAAAe,EAAAO,OAAAC,MACAP,EAAAV,SAEAC,KAAAY,eAGAK,QAhCA,SAgCAT,EAAAC,GAAA,IAAAS,EAAAlB,KACAA,KAAAmB,UAAA,WACAX,EAAAO,OAAAC,MAAAP,EAAAE,IACAF,EAAAC,OAAAQ,EAAAzB,OACA,KAAAe,EAAAO,OAAAC,QACAP,EAAAC,OAAA,KAGAD,EAAAV,SAEAC,KAAAY,eAGAQ,SA7CA,WA+CA,IAAAC,EAAArB,KAEAqB,EAAAF,UAAA,WACAE,EAAAjC,YAAAiC,EAAAjC,WAEAiC,EAAAjC,WACAiC,EAAAlC,SAAAmC,QAAA,SAAAC,GACAA,EAAAxB,SAAA,EACAwB,EAAAC,UAAAF,QAAA,SAAAG,GACAA,EAAA1B,SAAA,MAIAsB,EAAAlC,SAAAmC,QAAA,SAAAC,GACAA,EAAAxB,SAAA,EACAwB,EAAAC,UAAAF,QAAA,SAAAG,GACAA,EAAA1B,SAAA,MAIAsB,EAAAT,iBAIAc,YAvEA,SAuEAjB,GAEA,IAAAY,EAAArB,KACAqB,EAAAF,UAAA,WACAV,EAAAV,SAAAU,EAAAV,QACAU,EAAAV,QACAU,EAAAe,UAAAF,QAAA,SAAAC,GACAA,EAAAxB,SAAA,IAGAU,EAAAe,UAAAF,QAAA,SAAAC,GACAA,EAAAxB,SAAA,IAGAsB,EAAAT,iBAIAe,WAzFA,SAyFAC,EAAAC,GACA,IAAAR,EAAArB,KAEAqB,EAAAF,UAAA,WACAU,EAAA9B,SAAA8B,EAAA9B,QAEA,IAAA+B,KAEAF,EAAAJ,UAAAF,QAAA,SAAAC,GACAA,EAAAxB,SACA+B,EAAAC,KAAAR,KAKAO,EAAAjC,QAAA+B,EAAAJ,UAAA3B,OACA+B,EAAA7B,SAAA,EAEA6B,EAAA7B,SAAA,EAGAsB,EAAAT,iBAGAA,YAjHA,WAmHA,IAAAS,EAAArB,KACAqB,EAAA9B,WAAA,EACA8B,EAAAhC,MAAA,EACAgC,EAAA/B,KAAA,EACA,IAAA0C,KACAX,EAAAlC,SAAAmC,QAAA,SAAAC,GACAA,EAAAC,UAAAF,QAAA,SAAAG,EAAAQ,GACAR,EAAA1B,UACAsB,EAAA9B,YAAAkC,EAAAS,WAAAT,EAAAf,OACAsB,EAAAD,KAAAN,GACAJ,EAAA/B,KAAA0C,EAAAnC,OACAwB,EAAAhC,OAAAoC,EAAAf,OAAA,QAKAyB,aAnIA,WAsIAC,QAAAC,IADArC,KACAb,WAEAmD,aAxIA,WAyIA,IAAAjB,EAAArB,KAOAqB,EAAAlC,SAAAmC,QAAA,SAAAC,EAAAU,GACAV,EAAAC,UAAAF,QAAA,SAAAG,EAAAc,GACAd,EAAA1B,SAEAsB,EAAAmB,OAAAC,SAAA,gBAAAhB,EAAAiB,aAKArB,EAAAT,cACAS,EAAAsB,eAEAC,WA5JA,WA6JA5C,KAAAR,QAAAQ,KAAAR,QAEAmD,YA/JA,WAgKA,IACAE,KAEA,QAAAC,KAHA9C,KAGAwC,OAAAO,MAAAnE,KAAA,CACA,IAAAoE,EAJAhD,KAIAwC,OAAAO,MAAAnE,KAAAkE,GACAE,EAAAxB,UAAA3B,OAAA,GACAgD,EAAAd,KAAAiB,GANAhD,KAUAb,SAAA0D,IAGAI,QAnOA,WAmOA,IAAAC,EAAAlD,KACAA,KAAAmB,UAAA,WAOA+B,EAAAP,cAEAO,EAAA/D,SAAAmC,QAAA,SAAAC,GACAA,EAAAxB,SACAmD,EAAAtC,cAEAW,EAAAC,UAAAF,QAAA,SAAAG,GACAA,EAAA1B,SACAmD,EAAAtC,uBC7XeuC,GADEC,OAFjB,WAA0B,IAAAC,EAAArD,KAAasD,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAhC,MAAAmC,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,OAA2BC,YAAA,WAAqBJ,EAAAK,GAAA,mBAAAL,EAAA,UAAAG,EAAA,QAAuDC,YAAA,SAAAE,IAAyBC,MAAAP,EAAAT,cAAwBS,EAAAK,GAAA,WAAAL,EAAAQ,GAAAR,EAAA7D,OAAA,uBAAA6D,EAAAS,OAAAT,EAAAK,GAAA,KAAAF,EAAA,OAAgGO,IAAA,UAAAN,YAAA,mBAA2CJ,EAAAhD,UAAkDgD,EAAAS,KAAlDN,EAAA,OAA6BC,YAAA,WAAqBJ,EAAAW,GAAA,GAAAX,EAAAK,GAAA,KAAAF,EAAA,KAAAH,EAAAK,GAAA,cAAAL,EAAAK,GAAA,KAAAF,EAAA,KAAAH,EAAAK,GAAA,cAAAL,EAAAK,GAAA,KAAAL,EAAAY,GAAAZ,EAAA,kBAAA9B,EAAAU,GAA8J,OAAAuB,EAAA,MAAgBU,IAAAjC,EAAAwB,YAAA,cAAkCD,EAAA,MAAWC,YAAA,oBAA8BD,EAAA,SAAcC,YAAA,eAAAE,IAA+BC,MAAA,SAAAO,GAAyB,OAAAd,EAAA3B,YAAAH,OAA+BiC,EAAA,SAAcY,OAAOC,KAAA,YAAkBC,UAAWvE,QAAAwB,EAAAxB,aAAwBsD,EAAAK,GAAA,KAAAF,EAAA,OAA0BC,YAAA,oBAA8BD,EAAA,OAAYC,YAAA,WAAAW,OAA8BG,IAAAhD,EAAAiD,SAAAC,IAAA,MAA8BpB,EAAAK,GAAA,KAAAF,EAAA,KAAsBC,YAAA,eAAyBJ,EAAAK,GAAAL,EAAAQ,GAAAtC,EAAAmD,WAAA,KAAAlB,EAAA,KAA6CC,YAAA,gCAAwCJ,EAAAK,GAAA,KAAAF,EAAA,QAA2BmB,aAAa5F,KAAA,OAAA6F,QAAA,SAAA5D,OAAA,EAAA6D,WAAA,UAA8DpB,YAAA,iBAA6BJ,EAAAK,GAAA,aAAAL,EAAAK,GAAA,KAAAnC,EAAAuD,SAAA,OAAAtB,EAAA,MAAkEC,YAAA,mBAA6BD,EAAA,QAAAH,EAAAK,GAAA,QAAAL,EAAAK,GAAA,KAAAL,EAAAW,GAAA,QAAAX,EAAAS,KAAAT,EAAAK,GAAA,KAAAL,EAAAY,GAAA1C,EAAA,mBAAAwD,EAAAC,GAA0H,OAAAxB,EAAA,MAAgBU,IAAAc,EAAAvB,YAAA,cAAgCD,EAAA,SAAcC,YAAA,eAAAE,IAA+BC,MAAA,SAAAO,GAAyB,OAAAd,EAAA1B,WAAAJ,EAAAwD,OAAqCvB,EAAA,SAAcY,OAAOC,KAAA,YAAkBC,UAAWvE,QAAAgF,EAAAhF,aAAyBsD,EAAAK,GAAA,KAAAF,EAAA,OAA0BC,YAAA,WAAqBD,EAAA,OAAYC,YAAA,YAAAW,OAA+BG,IAAAQ,EAAAE,SAAAR,IAAA,MAA+BpB,EAAAK,GAAA,KAAAF,EAAA,OAAwBC,YAAA,kBAA4BD,EAAA,KAAUC,YAAA,eAAyBJ,EAAAK,GAAAL,EAAAQ,GAAAkB,EAAAG,cAAA7B,EAAAK,GAAA,KAAAF,EAAA,KAAwDC,YAAA,iBAA2BJ,EAAAK,GAAA,MAAAL,EAAAQ,GAAAkB,EAAAI,gBAAA9B,EAAAK,GAAA,KAAAF,EAAA,KAAgEC,YAAA,gBAA0BJ,EAAAK,GAAAL,EAAAQ,GAAAR,EAAA+B,GAAA,cAAA/B,CAAA0B,EAAA7C,cAAAsB,EAAA,QAAqEC,YAAA,eAAyBJ,EAAAK,GAAA,KAAAL,EAAAQ,GAAAkB,EAAAM,eAAAhC,EAAAK,GAAA,KAAAF,EAAA,OAAgEC,YAAA,WAAqBD,EAAA,OAAYC,YAAA,gBAA0BD,EAAA,OAAYC,YAAA,gBAA0BD,EAAA,UAAeY,OAAOkB,SAAAP,EAAArE,OAAA,KAA6B8C,EAAA,KAAUC,YAAA,oBAAAE,IAAoCC,MAAA,SAAAO,GAAyB,OAAAd,EAAAxC,IAAAsD,EAAAY,WAAgC1B,EAAAK,GAAA,KAAAF,EAAA,OAA4BC,YAAA,gBAA0BD,EAAA,SAAcmB,aAAa5F,KAAA,QAAA6F,QAAA,iBAAA5D,MAAA+D,EAAA,OAAAF,WAAA,eAAAU,WAAgGC,QAAA,KAAepB,OAASC,KAAA,SAAAoB,QAAA,qEAA8FnB,UAAWtD,MAAA+D,EAAA,QAAuBpB,IAAK+B,MAAA,SAAAvB,GAAyB,OAAAd,EAAAvC,SAAAqD,EAAAY,IAAmCY,MAAA,SAAAxB,GAA0B,OAAAd,EAAApC,QAAAkD,EAAAY,IAAkC,SAAAZ,GAAkB,OAAAd,EAAAuC,iBAA0BC,MAAA,SAAA1B,GAA2BA,EAAApD,OAAA+E,WAAsCzC,EAAA0C,KAAAhB,EAAA,SAAA1B,EAAA2C,GAAA7B,EAAApD,OAAAC,cAAyDqC,EAAAK,GAAA,KAAAF,EAAA,OAA0BC,YAAA,eAAyBD,EAAA,UAAeY,OAAOkB,SAAAP,EAAArE,QAAAqE,EAAApE,OAAsC6C,EAAA,KAAUC,YAAA,oBAAAE,IAAoCC,MAAA,SAAAO,GAAyB,OAAAd,EAAA9C,IAAA4D,EAAAY,oBAA4C,MAAM,GAAA1B,EAAAK,GAAA,KAAAL,EAAA,UAAAG,EAAA,OAA4CO,IAAA,UAAAN,YAAA,gBAAwCD,EAAA,SAAcC,YAAA,4BAAAE,IAA4CC,MAAAP,EAAAjC,YAAsBoC,EAAA,SAAcY,OAAOC,KAAA,YAAkBC,UAAWvE,QAAAsD,EAAAjE,gBAA0BiE,EAAAK,GAAA,KAAAF,EAAA,OAA0BC,YAAA,UAAoBJ,EAAAK,GAAA,WAAAL,EAAAQ,GAAAR,EAAAhE,OAAA,KAAAgE,EAAAQ,GAAAR,EAAA/D,MAAA,MAAAkE,EAAA,QAA6EC,YAAA,UAAoBJ,EAAAK,GAAAL,EAAAQ,GAAAR,EAAA+B,GAAA,cAAA/B,GAAA9D,YAAA,eAAA8D,EAAAK,GAAA,KAAAL,EAAA7D,OAA+JgE,EAAA,OAAyCC,YAAA,OAAAE,IAAuBC,MAAAP,EAAAf,gBAA0Be,EAAAK,GAAA,sBAAzPF,EAAA,OAA2GC,YAAA,UAAAE,IAA0BC,MAAAP,EAAAlB,gBAA0BkB,EAAAK,GAAA,wBAA0FL,EAAAS,QAE72HmC,iBADjB,WAAoC,IAAa3C,EAAbtD,KAAauD,eAA0BC,EAAvCxD,KAAuCqB,MAAAmC,IAAAF,EAAwB,OAAAE,EAAA,KAAeC,YAAA,YAAsBD,EAAA,QAAaC,YAAA,8BAAyC,WAAc,IAAaH,EAAbtD,KAAauD,eAA0BC,EAAvCxD,KAAuCqB,MAAAmC,IAAAF,EAAwB,OAAAE,EAAA,KAAeC,YAAA,eAA9EzD,KAAuG0D,GAAA,iBAAAF,EAAA,KAAkCC,YAAA,mCCErV,IAcAyC,EAdyBC,EAAQ,OAcjCC,CACExH,EACAuE,GATF,EAVA,SAAAkD,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/8.91d1b5b15e00aeee3726.js","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"header\">\r\n      购物车\r\n      <span class=\"manage\" v-if=\"isAccount\" @click=\"hanldeEdit\">\r\n        {{ isEdit? '完成': '管理' }}\r\n      </span>\r\n    </div>\r\n    <div class=\"cart-container\" ref=\"wrapper\">\r\n      <div class=\"noData\" v-if=\"!isAccount\">\r\n        <p class=\"not-img\">\r\n          <span class=\"iconfont icon-notstore\"></span>\r\n        </p>\r\n        <p>购物车竟然是空的</p>\r\n        <p>快去逛逛吧!</p>\r\n      </div>\r\n      <ul class=\"cart-item\" v-for=\"(item, index) in cartData\" :key=\"index\">\r\n        <li class=\"item-cell group\">\r\n          <label class=\"Nii-checkbox\" @click=\"handleCheck(item)\">\r\n            <input type=\"checkbox\" :checked=\"item.checked\">\r\n          </label>\r\n          <div class=\"item-cell-right\">\r\n            <img :src=\"item.storeImg\" alt=\"\" class=\"head-img\">\r\n            <p class=\"store-name\">{{ item.storeName }} <i class=\"iconfont icon-right-arrow\"></i></p>\r\n            <span class=\"order-status\" v-show=\"false\">去凑单</span>\r\n          </div>\r\n        </li>\r\n        <li class=\"item-cell sale\" v-if=\"item.saleList.length\">\r\n          <span>满减</span>\r\n          <p class=\"store-name\">下单满100元立减30元 <i class=\"iconfont icon-right-arrow\"></i></p>\r\n        </li>\r\n        <li class=\"item-cell\" v-for=\"(goods, ind) in item.goodsList\" :key=\"ind\">\r\n          <label class=\"Nii-checkbox\" @click=\"childCheck(item, goods)\">\r\n            <input type=\"checkbox\" :checked=\"goods.checked\">\r\n          </label>\r\n          <div class=\"notice\">\r\n            <img :src=\"goods.goodsImg\" alt=\"\" class=\"goods-img\">\r\n            <div class=\"goods-content\">\r\n              <p class=\"goods-info\">{{ goods.goodsInfo }}</p>\r\n              <p class=\"goods-weight\">规格：{{ goods.goodsWeight }}</p>\r\n              <p class=\"goods-price\">{{ goods.goodsPrice | formatPrice }}<span class=\"goods-unit\"> /{{ goods.unit }}</span></p>\r\n            </div>\r\n          </div>\r\n          <div class=\"numbox\">\r\n            <div class=\"numbox-area\">\r\n              <div class=\"minus-minus\">\r\n                <button :disabled=\"goods.amount < 2\"><i class=\"iconfont icon-sub\" @click=\"sub($event, goods)\"></i></button>\r\n              </div>\r\n              <div class=\"minus-input\">\r\n                <input type=\"number\" oninput=\"this.value=this.value.replace(/\\D/g,'').replace(/^0+(?=\\d)/,'')\" v-model.number=\"goods.amount\" @focus=\"enterNum($event, goods)\" @blur=\"blurNum($event, goods)\">\r\n              </div>\r\n              <div class=\"minus-plus\">\r\n                <button :disabled=\"goods.amount >= goods.max\"><i class=\"iconfont icon-jia\" @click=\"add($event, goods)\"></i></button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <div class=\"all-account\" ref=\"account\" v-if=\"isAccount\">\r\n      <label class=\"Nii-checkbox all-checkbox\" @click=\"AllCheck\">\r\n        <input type=\"checkbox\" :checked='allChecked'>\r\n      </label>\r\n      <div class=\"total\">\r\n        {{piece}}件/{{kind}}种 <span class=\"money\">{{ totalPrice || '0' | formatPrice }}元</span>\r\n      </div>\r\n      <div class=\"account\" @click=\"hanldeCommit\" v-if=\"!isEdit\">\r\n        结算\r\n      </div>\r\n      <div v-else class=\"edit\" @click=\"hanldeDelete\">\r\n        删除\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport BScroll from 'better-scroll';\r\nimport notImg from '@/assets/common/notimg.png';\r\n\r\nlet cartList = [\r\n  {\r\n    storeName: '青果便利店',\r\n    storeId: 1,\r\n    storeImg: notImg,\r\n    saleList: [\r\n      {\r\n        saleType: 1,\r\n        dec: '下单满100元立减30元'\r\n      }\r\n    ],\r\n    goodsList: [\r\n      {\r\n        goodsId: 1,\r\n        goodsInfo: '茅台镇洞藏老酒53度酱香型白酒低价批发坛装十五年原浆纯粮食酒',\r\n        goodsImg: notImg,\r\n        goodsWeight: '500ml*6',\r\n        goodsPrice: 1,\r\n        unit: '箱',\r\n        amount: 1,\r\n        max: 20\r\n      }, {\r\n        goodsId: 2,\r\n        goodsInfo: '椰树牌椰子汁250ml*24',\r\n        goodsImg: notImg,\r\n        goodsWeight: '250ml*24',\r\n        goodsPrice: 2,\r\n        unit: '箱',\r\n        amount: 1,\r\n        max: 10\r\n      }\r\n    ]\r\n  }, {\r\n    storeName: '西瓜便利店',\r\n    storeId: 2,\r\n    storeImg: notImg,\r\n    saleList: [],\r\n    goodsList: [\r\n      {\r\n        goodsId: 1,\r\n        goodsInfo: '怡泉+C柠檬味汽水500ml*12饮料',\r\n        goodsImg: notImg,\r\n        goodsWeight: '500ml*6',\r\n        goodsPrice: 3,\r\n        unit: '箱',\r\n        amount: 1,\r\n        max: 5\r\n      }, {\r\n        goodsId: 4,\r\n        goodsInfo: '陶华碧老干妈香辣脆油辣椒210g瓶',\r\n        goodsImg: notImg,\r\n        goodsWeight: '500ml',\r\n        goodsPrice: 4,\r\n        unit: '瓶',\r\n        amount: 1,\r\n        max: 20\r\n      }\r\n    ]\r\n  }\r\n]\r\n\r\nexport default {\r\n  name: 'cart',\r\n  data () {\r\n    return {\r\n      notImg,\r\n      xscroll: '',\r\n      cartData: [], // 购车列表\r\n      allChecked: false, // 总计全选\r\n      piece: 0, // 小计 /件\r\n      kind: 0, // 小计 种类\r\n      totalPrice: 0, // 合计价格\r\n      isEdit: false, // 是否编辑\r\n      rawNum: '' // input focus时获取的数值\r\n    }\r\n  },\r\n  watch: {\r\n    cartData: {\r\n      handler(val) {\r\n        // console.log(val)\r\n        // 如果购物车被清空全选按钮不打勾\r\n        if (!val.length) {\r\n          // console.log(val)\r\n          return false;\r\n        }\r\n\r\n        // 监听购物车数据 确认用户是否全部选中\r\n        let _self = this;\r\n        for (let i = 0; i < val.length; i++) {\r\n          if (!val[i].checked) {\r\n            _self.allChecked = false;\r\n            // 如果有一个没选中就不是全选，跳出循环\r\n            break;\r\n          } else {\r\n            // 全选中了\r\n            _self.allChecked = true;\r\n          }\r\n        }\r\n        // console.log(val)\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  computed: {\r\n    isAllCheck () {\r\n      return this.cartData.every((val) => {\r\n        // console.log(val)\r\n        // 如果购物车列表中每一条数据的checked都为true 那位证明用户全部选择了，否则返回flase\r\n        return val.checked;\r\n      })\r\n    },\r\n    isAccount () {\r\n      return this.cartData.length;\r\n    }\r\n  },\r\n  methods: {\r\n    add (e, res) {\r\n      // 数量加\r\n      if (res.amount >= res.max){\r\n        return false;\r\n      } else {\r\n        res.amount++\r\n      }\r\n      if (res.checked) {\r\n        // 选中了才算价格\r\n        this.handleTotal();\r\n      } \r\n    },\r\n    sub (e, res) {\r\n      // 数量减\r\n      if (res.amount < 2) {\r\n        return false;\r\n      } else {\r\n        res.amount--;\r\n      }\r\n      if (res.checked) {\r\n        // 选中了才算价格\r\n        this.handleTotal();\r\n      } \r\n    },\r\n    enterNum (e, res) {\r\n      this.rawNum = e.target.value;\r\n      if (res.checked) {\r\n        // 选中了才算价格\r\n        this.handleTotal();\r\n      }\r\n    },\r\n    blurNum (e, res) {\r\n      this.$nextTick(() => {\r\n        if (e.target.value > res.max) {\r\n          res.amount = this.rawNum;\r\n        } else if (e.target.value === '') {\r\n          res.amount = 1;\r\n        }\r\n      });\r\n      if (res.checked) {\r\n        // 选中了才算价格\r\n        this.handleTotal();\r\n      }\r\n    },\r\n    AllCheck () {\r\n      // 总计/全选 全不选\r\n      let _self = this;\r\n\r\n      _self.$nextTick(() => {\r\n        _self.allChecked = !_self.allChecked;\r\n\r\n        if (_self.allChecked) {\r\n          _self.cartData.forEach(item => {\r\n            item.checked = true;\r\n            item.goodsList.forEach(items => {\r\n              items.checked = true;\r\n            })\r\n          })\r\n        } else {\r\n          _self.cartData.forEach(item => {\r\n            item.checked = false;\r\n            item.goodsList.forEach(items => {\r\n              items.checked = false;\r\n            })\r\n          })\r\n        }\r\n        _self.handleTotal();\r\n      })\r\n      \r\n    },\r\n    handleCheck(res) {\r\n      // 店铺选中\r\n      let _self = this;\r\n      _self.$nextTick(() => {\r\n        res.checked = !res.checked;\r\n        if(res.checked) {\r\n          res.goodsList.forEach(item => {\r\n            item.checked = true;\r\n          })\r\n        } else {\r\n          res.goodsList.forEach(item => {\r\n            item.checked = false;\r\n          })\r\n        }\r\n        _self.handleTotal();\r\n\r\n      });\r\n    },\r\n    childCheck (parent, child) {\r\n      let _self = this;\r\n      // 商品选中\r\n      _self.$nextTick(() => {\r\n        child.checked = !child.checked;\r\n\r\n        let _check = []; // 选中的商品\r\n\r\n        parent.goodsList.forEach(item => {\r\n          if (item.checked) {\r\n            _check.push(item);\r\n          }\r\n        });\r\n\r\n        // 选中的商品只要大于等于购物车的种类,那么就说明该店铺内的商品为全选\r\n        if (_check.length >= parent.goodsList.length) {\r\n          parent.checked = true;\r\n        } else {\r\n          parent.checked = false;\r\n        }\r\n\r\n        _self.handleTotal();\r\n      })\r\n    },\r\n    handleTotal () {\r\n      // 计算总价\\件数\\品类\r\n      let _self = this;\r\n      _self.totalPrice = 0;\r\n      _self.piece = 0;\r\n      _self.kind = 0;\r\n      let _kind = [];\r\n      _self.cartData.forEach(item => {\r\n        item.goodsList.forEach((items, index) => {\r\n          if (items.checked) {\r\n            _self.totalPrice += items.goodsPrice * items.amount;\r\n            _kind.push(items);\r\n            _self.kind = _kind.length\r\n            _self.piece += items.amount - 0;\r\n          }\r\n        })\r\n      })\r\n    },\r\n    hanldeCommit () {\r\n      // 提交\r\n      let _self = this;\r\n      console.log(_self.cartData)\r\n    },\r\n    hanldeDelete () {\r\n      let _self = this;\r\n      // console.log(_self.cartData)\r\n      // _self.cartData = _self.cartData.filter(item => {\r\n      //   // console.log(item)\r\n      //   // _self.$store.dispatch('delGoodsAsync', item);\r\n      //   // return !item.checked;\r\n      // })\r\n      _self.cartData.forEach((item, index) => {\r\n        item.goodsList.forEach((items, indexs) => {\r\n          if (items.checked) {\r\n            // item.goodsList.splice(indexs, 1);\r\n            _self.$store.dispatch('delGoodsAsync', items.storeId);\r\n          }\r\n        })\r\n      });\r\n      \r\n      _self.handleTotal();\r\n      _self.getCartData();\r\n    },\r\n    hanldeEdit () {\r\n      this.isEdit = !this.isEdit;\r\n    },\r\n    getCartData () {\r\n      let _self = this;\r\n      let arr = [];\r\n\r\n      for (let o in _self.$store.state.cart) {\r\n        let x = _self.$store.state.cart[o];\r\n        if (x.goodsList.length > 0) {\r\n          arr.push(x);\r\n        }\r\n      };\r\n      \r\n      _self.cartData = arr;\r\n    }\r\n  },\r\n  mounted () {\r\n    this.$nextTick(() => {\r\n      // this.cartData.forEach(item => {\r\n      //   this.$set(item, 'checked', false);\r\n      //   item.goodsList.forEach(items => {\r\n      //     this.$set(items, 'checked', false);\r\n      //   })\r\n      // });\r\n      this.getCartData();\r\n      \r\n      this.cartData.forEach(item => {\r\n        if (item.checked) {\r\n          this.handleTotal()\r\n        };\r\n        item.goodsList.forEach(items => {\r\n          if (items.checked) {\r\n            this.handleTotal()\r\n          }\r\n        })\r\n      });\r\n\r\n      \r\n\r\n    });\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"@/styles/index.scss\";\r\n.noData {\r\n  padding-top: 1.5rem;\r\n  text-align: center;\r\n  .not-img {\r\n    padding-bottom: .2rem;\r\n    .icon-notstore {\r\n      color: #ccc;\r\n      font-size: 2rem;\r\n    }\r\n  }\r\n  p {\r\n    font-size: .14rem;\r\n    color: #666;\r\n  }\r\n}\r\n.header {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: .44rem;\r\n  z-index: 1;\r\n  line-height: .44rem;\r\n  text-align: center;\r\n  background: $bg;\r\n  color: #fff;\r\n  font-size: .18rem;\r\n  .manage {\r\n    position: absolute;\r\n    top: 0;\r\n    right: .1rem;\r\n    width: .44rem;\r\n    height: .44rem;\r\n    line-height: .44rem;\r\n    text-align: center;\r\n    font-size: .14rem;\r\n    \r\n  }\r\n}\r\n.cart-container {\r\n  overflow: hidden;\r\n  padding-top: .44rem;\r\n  padding-bottom: .96rem;\r\n  .cart-item {\r\n    width: 100%;\r\n    margin-top: .1rem;\r\n    .group {\r\n      @include border-bottom(#f5f5f5);\r\n    }\r\n    .sale {\r\n      display: flex;\r\n      position: relative;\r\n      padding: .11rem .3rem .11rem .15rem;\r\n      color: #666;\r\n      font-size: .14rem;\r\n      background: #f9f9f9!important;\r\n      @include border-bottom(#f5f5f5);\r\n      span {\r\n        display: inline-block;\r\n        box-sizing: border-box;\r\n        border-radius: 0.03rem;\r\n        border: 0.01rem solid #ff5f3d;\r\n        background-color: transparent;\r\n        color: #ff5f3d !important;\r\n        padding: .03rem 0.06rem;\r\n        font-size: .12rem;\r\n        line-height: .12rem;\r\n        margin-right: .05rem;\r\n      }\r\n      i {\r\n        position: absolute;\r\n        right: .15rem;\r\n        top: 50%;\r\n        transform: translateY(-50%);\r\n        font-size: .12rem;\r\n        color: #bbb;\r\n      }\r\n      p {\r\n        flex: 1;\r\n        height: .21rem;\r\n        @include ellipsis;\r\n      }\r\n    }\r\n    .item-cell {\r\n      display: flex;\r\n      background: #fff;\r\n      flex-wrap: wrap;\r\n      .item-cell-right {\r\n        flex: 1;\r\n        padding: .11rem .15rem .11rem 0;\r\n        .head-img {\r\n          float: left;\r\n          width: .2rem;\r\n          height: .2rem;\r\n          margin-right: .08rem;\r\n          border-radius: .02rem;\r\n        }\r\n        .store-name {\r\n          padding-right: 1rem;\r\n          color: #383838;\r\n          font-size: .15rem;\r\n          i {\r\n            color: #999;\r\n            font-size: .12rem;\r\n          }\r\n        }\r\n        .order-status {\r\n          position: absolute;\r\n          display: inline-block;\r\n          top: 0;\r\n          right: .1rem;\r\n          height: .44rem;\r\n          line-height: .44rem;\r\n          color: $pinkText;\r\n          font-size: .12rem;\r\n        }\r\n      }\r\n      .notice {\r\n        flex: 1;\r\n        display: flex;\r\n        position: relative;\r\n        padding: .11rem .15rem .11rem 0;\r\n        background: #fff;\r\n        .goods-img {\r\n          width: .6rem;\r\n          height: .6rem;\r\n          margin-right: .1rem;\r\n        }\r\n        .goods-add {\r\n          position: absolute;\r\n          right: 0;\r\n          bottom: 0;\r\n          width: .44rem;\r\n          height: .44rem;\r\n          line-height: .44rem;\r\n          text-align: center;\r\n          span {\r\n            color: $pinkText;\r\n            font-size: .22rem;\r\n          }\r\n        }\r\n        .goods-content {\r\n          min-width: 0;\r\n          flex: 1;\r\n          .goods-info {\r\n            width: 100%;\r\n            height: .38rem;\r\n            margin-bottom: .06rem;\r\n            color: #383838;\r\n            font-size: .13rem;\r\n            overflow: hidden;\r\n            // white-space: nowrap;\r\n            // text-overflow: ellipsis;\r\n            // line-clamp: 2;\r\n          }\r\n          .goods-weight {\r\n            overflow: hidden;\r\n            height: .18rem;\r\n            font-size: .12rem;\r\n            color: #8f8f94;\r\n          }\r\n          .goods-price {\r\n            overflow: hidden;\r\n            height: .18rem;\r\n            font-size: .12rem;\r\n            color: $pinkText;\r\n          }\r\n          .goods-unit {\r\n            color: #8f8f94;\r\n          }\r\n        }\r\n      }\r\n      .numbox {\r\n        width: 100%;\r\n        height: .44rem;\r\n        padding-left: 1.14rem;\r\n        @include border-bottom-posi(#f5f5f5, .15rem);\r\n        .numbox-area {\r\n          display: flex;\r\n          width: 1.4rem;\r\n          height: .3rem;\r\n          border-radius: 0.03rem;\r\n          border: 0.01rem solid rgba(0, 0, 0, 0.2);\r\n        }\r\n\r\n        .numbox-area .minus-minus {\r\n          flex: 1;\r\n          height: 100%;\r\n        }\r\n\r\n        .numbox-area .minus-minus button {\r\n          width: 100%;\r\n          height: 100%;\r\n        }\r\n\r\n        .numbox-area .minus-plus {\r\n          flex: 1;\r\n          height: 100%;\r\n        }\r\n\r\n        .numbox-area .minus-plus button {\r\n          width: 100%;\r\n          height: 100%;\r\n        }\r\n\r\n        .numbox-area .minus-input {\r\n          min-width: 0;\r\n          flex: 2;\r\n          height: 100%;\r\n        }\r\n\r\n        .numbox-area .minus-input input {\r\n          width: 100%;\r\n          height: 100%;\r\n          font-size: .16rem;\r\n          text-align: center;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.all-account {\r\n  @include border-top(#f5f5f5);\r\n  display: flex;\r\n  position: fixed;\r\n  left: 0;\r\n  bottom: .5rem;\r\n  z-index: 2;\r\n  width: 100%;\r\n  height: .4rem;\r\n  background: #fcfcfc;\r\n  .all-checkbox {\r\n    width: .44rem;\r\n    height: .4rem;\r\n  }\r\n  .total {\r\n    flex: 1;\r\n    text-align: center;\r\n    line-height: .4rem;\r\n    font-size: .15rem;\r\n    color: #383838;\r\n    .money {\r\n      color: $pinkText;\r\n    }\r\n  }\r\n  .account {\r\n    box-sizing: border-box;\r\n    width: .92rem;\r\n    height: .4rem;\r\n    line-height: .4rem;\r\n    background: #FFA037;\r\n    color: #fff;\r\n    font-size: .15rem;\r\n    text-align: center;\r\n  }\r\n  .edit {\r\n    box-sizing: border-box;\r\n    width: .92rem;\r\n    height: .4rem;\r\n    line-height: .4rem;\r\n    background: $pinkText;\r\n    color: #fff;\r\n    font-size: .15rem;\r\n    text-align: center;\r\n  }\r\n}\r\n\r\n.Nii-checkbox {\r\n  position: relative;\r\n  padding-left: 0.12rem;\r\n  width: .44rem;\r\n  input {\r\n    display: inline-block;\r\n    position: absolute;\r\n    top: 50%;\r\n    transform: translateY(-50%);\r\n    width: .18rem;\r\n    height: .18rem;\r\n    border-radius: .18rem;\r\n    border: 1px solid #b2b2b2;\r\n    font-size: .14rem;\r\n  }\r\n  input:checked {\r\n    border: none;\r\n    background: $btn;\r\n    background-image: url('../../../assets/login/check.png');\r\n    background-size: 80% 80%;\r\n    background-position: 50% 50%;\r\n    background-repeat: no-repeat;\r\n  }\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/cart/children/cart.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"header\"},[_vm._v(\"\\n    购物车\\n    \"),(_vm.isAccount)?_c('span',{staticClass:\"manage\",on:{\"click\":_vm.hanldeEdit}},[_vm._v(\"\\n      \"+_vm._s(_vm.isEdit? '完成': '管理')+\"\\n    \")]):_vm._e()]),_vm._v(\" \"),_c('div',{ref:\"wrapper\",staticClass:\"cart-container\"},[(!_vm.isAccount)?_c('div',{staticClass:\"noData\"},[_vm._m(0),_vm._v(\" \"),_c('p',[_vm._v(\"购物车竟然是空的\")]),_vm._v(\" \"),_c('p',[_vm._v(\"快去逛逛吧!\")])]):_vm._e(),_vm._v(\" \"),_vm._l((_vm.cartData),function(item,index){return _c('ul',{key:index,staticClass:\"cart-item\"},[_c('li',{staticClass:\"item-cell group\"},[_c('label',{staticClass:\"Nii-checkbox\",on:{\"click\":function($event){return _vm.handleCheck(item)}}},[_c('input',{attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":item.checked}})]),_vm._v(\" \"),_c('div',{staticClass:\"item-cell-right\"},[_c('img',{staticClass:\"head-img\",attrs:{\"src\":item.storeImg,\"alt\":\"\"}}),_vm._v(\" \"),_c('p',{staticClass:\"store-name\"},[_vm._v(_vm._s(item.storeName)+\" \"),_c('i',{staticClass:\"iconfont icon-right-arrow\"})]),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],staticClass:\"order-status\"},[_vm._v(\"去凑单\")])])]),_vm._v(\" \"),(item.saleList.length)?_c('li',{staticClass:\"item-cell sale\"},[_c('span',[_vm._v(\"满减\")]),_vm._v(\" \"),_vm._m(1,true)]):_vm._e(),_vm._v(\" \"),_vm._l((item.goodsList),function(goods,ind){return _c('li',{key:ind,staticClass:\"item-cell\"},[_c('label',{staticClass:\"Nii-checkbox\",on:{\"click\":function($event){return _vm.childCheck(item, goods)}}},[_c('input',{attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":goods.checked}})]),_vm._v(\" \"),_c('div',{staticClass:\"notice\"},[_c('img',{staticClass:\"goods-img\",attrs:{\"src\":goods.goodsImg,\"alt\":\"\"}}),_vm._v(\" \"),_c('div',{staticClass:\"goods-content\"},[_c('p',{staticClass:\"goods-info\"},[_vm._v(_vm._s(goods.goodsInfo))]),_vm._v(\" \"),_c('p',{staticClass:\"goods-weight\"},[_vm._v(\"规格：\"+_vm._s(goods.goodsWeight))]),_vm._v(\" \"),_c('p',{staticClass:\"goods-price\"},[_vm._v(_vm._s(_vm._f(\"formatPrice\")(goods.goodsPrice))),_c('span',{staticClass:\"goods-unit\"},[_vm._v(\" /\"+_vm._s(goods.unit))])])])]),_vm._v(\" \"),_c('div',{staticClass:\"numbox\"},[_c('div',{staticClass:\"numbox-area\"},[_c('div',{staticClass:\"minus-minus\"},[_c('button',{attrs:{\"disabled\":goods.amount < 2}},[_c('i',{staticClass:\"iconfont icon-sub\",on:{\"click\":function($event){return _vm.sub($event, goods)}}})])]),_vm._v(\" \"),_c('div',{staticClass:\"minus-input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(goods.amount),expression:\"goods.amount\",modifiers:{\"number\":true}}],attrs:{\"type\":\"number\",\"oninput\":\"this.value=this.value.replace(/\\\\D/g,'').replace(/^0+(?=\\\\d)/,'')\"},domProps:{\"value\":(goods.amount)},on:{\"focus\":function($event){return _vm.enterNum($event, goods)},\"blur\":[function($event){return _vm.blurNum($event, goods)},function($event){return _vm.$forceUpdate()}],\"input\":function($event){if($event.target.composing){ return; }_vm.$set(goods, \"amount\", _vm._n($event.target.value))}}})]),_vm._v(\" \"),_c('div',{staticClass:\"minus-plus\"},[_c('button',{attrs:{\"disabled\":goods.amount >= goods.max}},[_c('i',{staticClass:\"iconfont icon-jia\",on:{\"click\":function($event){return _vm.add($event, goods)}}})])])])])])})],2)})],2),_vm._v(\" \"),(_vm.isAccount)?_c('div',{ref:\"account\",staticClass:\"all-account\"},[_c('label',{staticClass:\"Nii-checkbox all-checkbox\",on:{\"click\":_vm.AllCheck}},[_c('input',{attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":_vm.allChecked}})]),_vm._v(\" \"),_c('div',{staticClass:\"total\"},[_vm._v(\"\\n      \"+_vm._s(_vm.piece)+\"件/\"+_vm._s(_vm.kind)+\"种 \"),_c('span',{staticClass:\"money\"},[_vm._v(_vm._s(_vm._f(\"formatPrice\")(_vm.totalPrice || '0'))+\"元\")])]),_vm._v(\" \"),(!_vm.isEdit)?_c('div',{staticClass:\"account\",on:{\"click\":_vm.hanldeCommit}},[_vm._v(\"\\n      结算\\n    \")]):_c('div',{staticClass:\"edit\",on:{\"click\":_vm.hanldeDelete}},[_vm._v(\"\\n      删除\\n    \")])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',{staticClass:\"not-img\"},[_c('span',{staticClass:\"iconfont icon-notstore\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',{staticClass:\"store-name\"},[_vm._v(\"下单满100元立减30元 \"),_c('i',{staticClass:\"iconfont icon-right-arrow\"})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-c2604eaa\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/cart/children/cart.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c2604eaa\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./cart.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./cart.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./cart.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c2604eaa\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./cart.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c2604eaa\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/cart/children/cart.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}